import{v as r,o as c,a as m,b as s,x as u,y as l,A as h,B as p,C as g,D as w,f as b,G as f,H as i,I as v}from"./calendar.esm-e99dd71c.js";const _="/starcreated-cms/assets/img-login-eb5d35da.svg";r(()=>isCollapsed.value?props.widthCollapsed:props.width);const x={class:"img-fluid h-100vh login-bg"},y={class:"container"},$={class:"row d-flex justify-content-center"},C={class:"col-md-10 col-sm-12"},P={class:"bg-gray-bg rounded-4 p-lg-4 m-0 p-0"},B={class:"row m-4 pt-4 pb-4"},M=s("div",{class:"col-md-6"},[s("div",null,[s("h2",{class:"text-light text-center mb-4"}," 創星球內部管理系統 "),s("div",{class:"d-flex justify-content-center"},[s("img",{src:_,alt:"img-login.svg"})])])],-1),k={class:"col-md-6"},V=s("h2",{class:"text-light text-center mb-4"},"登入",-1),j={class:"mb-3"},D=s("label",{for:"exampleInputEmail1",class:"form-label text-light"},"E-mail",-1),I={class:"mb-2 position-relative"},A=s("label",{for:"loginPw",class:"form-label text-light"},"密碼",-1),E=["type"],L={class:"position-absolute end-0 translate-middle",style:{top:"70%"}},S=s("div",{class:"mb-4"},[s("a",{href:"#",class:"text-decoration-underline text-secondary","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},"忘記密碼 ?")],-1),q=s("div",{class:"d-flex justify-content-center"},[s("button",{type:"submit",class:"btn btn-primary text-light"}," 登入 ")],-1),H=b('<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h1 class="modal-title fs-5" id="exampleModalLabel">忘記密碼?</h1><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body text-center">請聯絡管理員: help@westar.tw</div><div class="modal-footer d-flex justify-content-center"><button type="button" class="btn btn-light" data-bs-dismiss="modal"> 關閉 </button></div></div></div></div>',1),d="https://stage.westar-cms.com/v1/login",N={setup:()=>({v$:f()}),data(){return{data:{},user:{email:"rd14@westar.tw",password:"Acc123456"},showPassword:!0,isLoggedIn:!1}},validations(){return{email:{required:i,email:v},password:{required:i}}},methods:{login(){this.$http.post(d,this.user).then(e=>{const{expired:t}=e.data,o=e.data.result.message;let a=this;const{token:n}=e.data;document.cookie=`ourToken=${n};expires=${new Date(t)};`,document.cookie=`expires=${new Date(t)};`,console.log(e.data.result.message),console.log(e.data.result.code),console.log(e.data.result),o==="登入成功"?this.$swal({title:"登入成功",icon:"success",showConfirmButton:!1,timer:1500}).then(function(){a.$router.push({name:"Home"})}):(this.$swal({title:"登入失敗",text:"請確認資料是否輸入正確",icon:"warning",showConfirmButton:!1,timer:1500}),this.$router.push("/"))}).catch(e=>{this.$httpMessageState(e.response,"請確認資料是否輸入正確")})},showAlert(){this.$http.post(d,this.user).then(e=>{e.data.result.message==="登入成功"?this.$swal({title:"登入成功",icon:"success",showConfirmButton:!1,timer:1500}).then(function(){this.$router.push("/starcreated-cms/")}):this.$swal({title:"登入失敗",text:"信箱密碼有誤，請確認資料是否輸入正確",icon:"warning",showConfirmButton:!1,timer:1500})})},toggleShow(){this.showPassword=!this.showPassword}}},U=Object.assign(N,{__name:"LoginView",setup(e){return(t,o)=>(c(),m(w,null,[s("section",x,[s("div",y,[s("div",$,[s("div",C,[s("div",P,[s("div",B,[M,s("div",k,[V,s("form",{class:"fs-6",onSubmit:o[3]||(o[3]=u((...a)=>t.login&&t.login(...a),["prevent"]))},[s("div",j,[D,l(s("input",{type:"email",class:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"hi@westar.tw","onUpdate:modelValue":o[0]||(o[0]=a=>t.user.email=a),required:""},null,512),[[h,t.user.email]])]),s("div",I,[A,l(s("input",{type:t.showPassword?"password":"text",class:"form-control",id:"exampleInputPassword1",placeholder:"Abc123456","onUpdate:modelValue":o[1]||(o[1]=a=>t.user.password=a),required:""},null,8,E),[[p,t.user.password]]),s("span",L,[s("i",{class:g([t.showPassword?"bi-eye-slash-fill":"bi-eye-fill","bi"]),onClick:o[2]||(o[2]=a=>t.showPassword=!t.showPassword)},null,2)])]),S,q],32)])])])])])])]),H],64))}});export{U as default};
